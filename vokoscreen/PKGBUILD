
pkgname=vokoscreen
pkgver=2.4.0
_commit=41784d9d92bb2b95bd9c7dd6485423b1ba2ee43c
pkgrel=2
pkgdesc="Easy to use screencast creator to record educational videos, videoconferences, etc"
arch=('x86_64')
url="http://www.kohaupt-online.de/"
license=('GPL2')
depends=('qt5-x11extras' 'ffmpeg' 'lame' 'pulseaudio-alsa' 'alsa-utils' 'v4l-utils')
makedepends=('cmake' 'qt5-tools')
install=$pkgname.install
options=('!strip')
#source=("https://github.com/vkohaupt/vokoscreen/archive/$_pkgver.tar.gz")
source=("https://github.com/vkohaupt/vokoscreen/archive/$_commit.zip"
        'qt5.5.diff')
md5sums=('4ae661761d29772eacd8af198c39bd13'
         '54a408936998b720057202e374dcbb53')

build() {
    cd ${srcdir}/$pkgname-$_commit
    patch -p1 -i $srcdir/qt5.5.diff
    
    /usr/lib/qt5/bin/qmake $pkgname.pro \
      "CONFIG+=LINUX_INTEGRATED" \
      "INSTALL_ROOT_PATH=$pkgdir/usr/" \
      "CONFIG+=release" \
      "CONFIG+=c++14"
    make -j1
}

package() {
    cd ${srcdir}/$pkgname-$_commit
    
    make INSTALL_ROOT=${pkgdir} install
}
