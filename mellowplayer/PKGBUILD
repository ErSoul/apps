
pkgname=mellowplayer
pkgver=3.0.0
_commit=2282a3b
pkgrel=1
pkgdesc="Open source and cross-platform desktop application that runs web-based music streaming 
         services in its own window and provides integration with your desktop, specifically crafted for KaOS"
url='https://colinduquesnoy.github.io/MellowPlayer/'
license=('GPL')
arch=('x86_64')
depends=('kglobalaccel' 'knotifications' 'qtwebengine' 'snorenotify' 'pepper-flash' 'widevine'
         'qt5-quickcontrols2' 'libnotify')
makedepends=('qt5-tools')
source=("https://github.com/ColinDuquesnoy/MellowPlayer/tarball/master/MellowPlayer-${pkgver}.tar.gz")
md5sums=('ab9dc613cf90c13d90d505197f9be46b')

build() {
  mkdir -p build
  cd build
  
  cmake ../ColinDuquesnoy-MellowPlayer-${_commit} \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_LIBDIR=lib \
    -DBUILD_TESTS=OFF \
    -DDEFAULT_THEME="Midna"
  make 
}

package() {
  cd build

  make DESTDIR=${pkgdir} install
}
