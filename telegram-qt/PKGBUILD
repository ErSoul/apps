
pkgname=telegram-qt
pkgver=0.0.1
pkgrel=1
pkgdesc="Qt-based client library for Telegram IM"
arch=('x86_64')
url="https://projects.kde.org/projects/playground/network/telegram-qt/"
license=('GPL')
depends=('qt5-base')
makedepends=('extra-cmake-modules' 'git')
groups=('kde-telepathy')
source=("git+https://github.com/Kaffeine/telegram-qt.git"
        'qt5.5.diff')
md5sums=('SKIP'
         '38f0e93b4d906ba3163e13fc93d61cc9')

build() {
  cd ${srcdir}
  patch -p1 -i ${srcdir}/qt5.5.diff
  
  mkdir -p build
  cd build

  cmake ../${pkgname} \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_LIBDIR=lib \
    -DUSE_QT4=OFF 
    #-DENABLE_TESTAPP=TRUE
  make
}

package() {
  cd build

  make DESTDIR=${pkgdir} install
}
