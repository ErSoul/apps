
# build version at https://dolphin-emu.org/download/
pkgname=dolphin-emu
pkgver=5.0.7459
pkgrel=1
_commit=7a5e51cda778932fbb03fa8db411dd8f75772b50
pkgdesc='GameCube, Wii and Triforce emulator'
arch=('x86_64')
url='http://dolphin-emu.org'
license=('GPL2')
depends=('bluez' 'ffmpeg' 'libao' 'miniupnpc' 'openal' 'portaudio'
         'libevdev' 'soundtouch' 'qt5-base' 'pulseaudio')
makedepends=('cmake')
source=("https://github.com/dolphin-emu/dolphin/archive/${_commit}.zip")
#source=("https://github.com/dolphin-emu/dolphin/archive/${pkgver}.tar.gz")
md5sums=('1e78fd6f7d34875c4fc33a6897c1e250')
         
build() {
  mkdir -p build 
  cd build
  
  cmake ../dolphin-${_commit}\
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DENABLE_QT2=ON \
    -DENABLE_WX=OFF \
    -DUSE_EGL=ON
  make
}

package() {
  cd build

  make DESTDIR=${pkgdir} install
  
  install -D -m644 ../dolphin-${_commit}/Data/51-usb-device.rules -t ${pkgdir}/usr/lib/udev/rules.d/
}


