
pkgname=lmms
pkgver=1.1.3
_commit=06e1415
pkgrel=1
pkgdesc='The Linux MultiMedia Studio.'
arch=('x86_64')
url='http://lmms.sourceforge.net/'
license=('GPL')
depends=('sdl' 'glib2' 'fluidsynth' 'libpng' 'libvorbis' 'libxft' 'libxinerama' 'qt'
         'sdl_sound' 'libsamplerate' 'shared-mime-info' 'fltk')
makedepends=('cmake' 'ladspa' 'libxft' 'freetype2' 'fftw')
options=('!makeflags')
install=lmms.install
source=("https://github.com/LMMS/lmms/archive/v${pkgver}.tar.gz"
#source=("https://github.com/LMMS/lmms/tarball/master/lmms-${pkgver}.tar.gz")
md5sums=('88d9e66d240b711c37315e3c9da644a1')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  #cd ${srcdir}/LMMS-lmms-${_commit}/
  #sed -e "s|#include <QtCore/QMutex>|#include <QMutex>|" -i ${srcdir}/LMMS-lmms-${_commit}/include/AutomatableModel.h

  cmake . -DCMAKE_INSTALL_PREFIX=/usr 
          #-DWANT_QT5=ON   # qt5-base build is ported in master
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver
  #cd ${srcdir}/LMMS-lmms-${_commit}/
  
  make DESTDIR=${pkgdir} install
}
