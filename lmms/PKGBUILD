
pkgname=lmms
pkgver=1.1.1
pkgrel=1
pkgdesc='The Linux MultiMedia Studio.'
arch=('x86_64')
url='http://lmms.sourceforge.net/'
license=('GPL')
depends=('sdl' 'glib2' 'fluidsynth' 'libpng' 'libvorbis' 'libxft' 'libxinerama' 'qt'
         'sdl_sound' 'libsamplerate' 'shared-mime-info' 'fltk')
makedepends=('cmake' 'ladspa' 'libxft' 'freetype2' 'fftw')
options=('!makeflags')
install=lmms.install
source=("https://github.com/LMMS/lmms/archive/v${pkgver}.tar.gz"
        'calcslope.patch')
md5sums=('e56c3e58cdb97ca42e6fb89970c37254'
         '7c5d6598c146bb8379055ea8d97c943c')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  patch -p1 -i ${srcdir}/calcslope.patch

  cmake . -DCMAKE_INSTALL_PREFIX=/usr \
          #-DWANT_QT5=ON   qt5-base build is ready in master
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver
  
  make DESTDIR=${pkgdir} install
}
