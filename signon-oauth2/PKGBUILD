
pkgname=signon-oauth2
pkgver=0.23
_commit=b74b5397992caddeb32a6158c9295126c55a3025
pkgrel=1
pkgdesc='OAuth 2 plugin for signon'
arch=('x86_64')
url="https://gitlab.com/accounts-sso"
license=('LGPL')
depends=('signonqt' 'qt5-xmlpatterns')
# https://groups.google.com/forum/#!forum/accounts-sso-announce
source=("https://gitlab.com/accounts-sso/signon-plugin-oauth2/repository/archive.tar.bz2?ref=${_commit}")
md5sums=('3797f5eca30fcdf826688184d4e14dda')

build() {
  cd $srcdir/signon-plugin-oauth2-${_commit}-${_commit}

  /usr/lib/qt5/bin/qmake PREFIX=/usr LIBDIR=/usr/lib
  make
}

package() {
  cd $srcdir/signon-plugin-oauth2-${_commit}-${_commit}
  make INSTALL_ROOT=$pkgdir install
  
  # kaccounts-providers conflict
  rm -r $pkgdir/etc/signon-ui/webkit-options.d/www.facebook.com.conf
}
