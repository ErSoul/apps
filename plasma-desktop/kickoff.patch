From: Eike Hein <hein@kde.org>
Date: Sat, 09 Jan 2016 00:56:26 +0000
Subject: Add missing appletInterface prop.
X-Git-Url: http://quickgit.kde.org/?p=plasma-desktop.git&a=commitdiff&h=12a64ed82308b9a368d42f641fb23da8b18c3000
---
Add missing appletInterface prop.

BUG:357638
---


--- a/applets/kicker/plugin/computermodel.cpp
+++ b/applets/kicker/plugin/computermodel.cpp
@@ -140,6 +140,7 @@
 , m_systemAppsModel(new FavoritesModel(this))
 , m_filteredPlacesModel(new FilteredPlacesModel(this))
 , m_appNameFormat(AppEntry::NameOnly)
+, m_appletInterface(nullptr)
 {
     connect(m_systemAppsModel, &FavoritesModel::favoritesChanged, this, &ComputerModel::systemApplicationsChanged);
     m_systemAppsModel->setFavorites(QStringList() << "systemsettings.desktop");
@@ -173,6 +174,20 @@
         m_systemAppsModel->refresh();
 
         emit appNameFormatChanged();
+    }
+}
+
+QObject *ComputerModel::appletInterface() const
+{
+    return m_appletInterface;
+}
+
+void ComputerModel::setAppletInterface(QObject *appletInterface)
+{
+    if (m_appletInterface != appletInterface) {
+        m_appletInterface = appletInterface;
+
+        emit appletInterfaceChanged();
     }
 }
 

--- a/applets/kicker/plugin/computermodel.h
+++ b/applets/kicker/plugin/computermodel.h
@@ -75,6 +75,7 @@
     Q_OBJECT
 
     Q_PROPERTY(int appNameFormat READ appNameFormat WRITE setAppNameFormat NOTIFY appNameFormatChanged)
+    Q_PROPERTY(QObject* appletInterface READ appletInterface WRITE setAppletInterface NOTIFY appletInterfaceChanged)
     Q_PROPERTY(QStringList systemApplications READ systemApplications WRITE setSystemApplications NOTIFY systemApplicationsChanged)
 
     public:
@@ -86,6 +87,9 @@
         int appNameFormat() const;
         void setAppNameFormat(int format);
 
+        QObject *appletInterface() const;
+        void setAppletInterface(QObject *appletInterface);
+
         QStringList systemApplications() const;
         void setSystemApplications(const QStringList &apps);
 
@@ -95,6 +99,7 @@
 
     Q_SIGNALS:
         void appNameFormatChanged() const;
+        void appletInterfaceChanged() const;
         void systemApplicationsChanged() const;
 
     private Q_SLOTS:
@@ -106,6 +111,7 @@
         FavoritesModel *m_systemAppsModel;
         FilteredPlacesModel *m_filteredPlacesModel;
         AppEntry::NameFormat m_appNameFormat;
+        QObject *m_appletInterface;
 };
 
 #endif

--- a/applets/kickoff/package/contents/ui/ComputerView.qml
+++ b/applets/kickoff/package/contents/ui/ComputerView.qml
@@ -28,6 +28,8 @@
 
         appNameFormat: rootModel.appNameFormat
 
+        appletInterface: plasmoid
+
         favoritesModel: globalFavorites
 
         Component.onCompleted: {
