
pkgname=ktorrent
pkgver=4.3.1.1
pkgrel=3
ktorver=4.3.1
pkgdesc="A BitTorrent program for KDE"
arch=('x86_64')
url="http://ktorrent.pwsp.net/"
license=('GPL2')
depends=('kde-workspace' 'taglib' 'libktorrent')
makedepends=('cmake' 'automoc4' 'docbook-xsl' 'boost' 'git')
categories=('network')
options=('libtool')
#source=("http://ktorrent.pwsp.net/downloads/${ktorver}/ktorrent-${ktorver}.tar.bz2"
source=('ktorrent.tar.xz'
        'desktop.diff')
md5sums=('b1457de9218969504746041ad6b510d8'
         '02a4066af90062e1f30bc576c825c000')

prepare() {
	cd "${srcdir}/${pkgname}"
	patch -p1 -i "${srcdir}"/desktop.diff
}

build() {
	cd "${srcdir}"
	mkdir build
	
	cd build
	cmake ../${pkgname} \
	  -DCMAKE_BUILD_TYPE=Release \
	  -DCMAKE_INSTALL_PREFIX=/usr 
	make
}

package() {
	cd "${srcdir}/build"
	
	make DESTDIR="${pkgdir}" install
}
