
# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=libkactivities
_pkgname=kactivities
pkgver=4.13.3
pkgrel=1
arch=('x86_64')
pkgdesc='Transitional kactivities 4 package to have KDE 4 packages work on plasma5'
url='http://kde.org/'
license=('GPL' 'FDL')
depends=('kdelibs')
makedepends=('cmake' 'automoc4')
replaces=('kactivities')
provides=("kactivities=${_kdever}")
conflicts=('kactivities')
source=($_mirror/${_pkgname}-$pkgver.tar.xz)
md5sums=('e56a3aead6f418d973c0acd9c889deb8')


build() {
	cd "${srcdir}/${_pkgname}-${pkgver}"

        rm -rf build
	mkdir build && cd build

	cmake .. \
    		-DCMAKE_BUILD_TYPE=Release \
    		-DCMAKE_INSTALL_PREFIX=/usr \
    		-DBUILD_nepomuk=OFF
	make
}

package() {
  	cd ${srcdir}/${_pkgname}-${pkgver}/build
	make DESTDIR=$pkgdir install
	
	# remove kf5/plasma 5 provided file
	rm -rf ${pkgdir}/usr/bin/kactivitymanagerd
}

