
pkgname=kf5-yakuake
pkgver=2.9.9.1
pkgrel=1
pkgdesc="A KDE konsole application with the look and feel of that in the Quake engine, kf5 version"
arch=('x86_64')
url="http://yakuake.kde.org"
license=('GPL')
depends=('konsole' 'knewstuff')
makedepends=('extra-cmake-modules' 'git')
conflicts=('yakuake')
groups=('system')
install="${pkgname}.install"
source=("git://anongit.kde.org/yakuake#branch=frameworks")
md5sums=('SKIP')

build() {
  cd ${srcdir}
  sed -i -e 's/KAboutLicense::GPL/KAboutData::License_GPL/' ${srcdir}/yakuake/app/main.cpp
  
  mkdir build
  cd build
  cmake ../yakuake \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DLIB_INSTALL_DIR=lib \
    -DSYSCONF_INSTALL_DIR=/etc \
    -DQML_INSTALL_DIR=/usr/lib/qt5/qml \
    -DPLUGIN_INSTALL_DIR=/usr/lib/qt5/plugins \
    -DBUILD_TESTING=OFF 
  make
}

package() {
  cd ${srcdir}/build
  
  make DESTDIR=${pkgdir} install
}
