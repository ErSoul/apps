
pkgname=graphviz
pkgver=2.42.1
_pkgver=2.42.1
pkgrel=1
pkgdesc="Open source graph visualization software"
arch=('x86_64')
url="https://www.graphviz.org/"
license=('CPL')
depends=('gd' 'librsvg' 'libxaw' 'ghostscript' 'pango' 'libtool' 'perl' 'python2')
makedepends=('swig' 'guile')
options=('!libtool')
#source=("https://graphviz.gitlab.io/pub/graphviz/stable/SOURCES/${pkgname}.tar.gz"
source=("https://www2.graphviz.org/Packages/stable/portable_source/graphviz-${_pkgver}.tar.gz"
       'LICENSE')
install='graphviz.install'
md5sums=('b6d51154a09a4e25d1894cc6ff7dd3a5'
         '3e75bb9ec12a51993bd30e51011b4229')

build() {
    cd ${pkgname}-${_pkgver}
    sed -i '/LIBPOSTFIX="64"/d' configure

    ./configure --prefix=/usr 
    make
}

package() {
    cd ${pkgname}-${_pkgver}
    make DESTDIR=${pkgdir} install

    install -Dm644 ../LICENSE ${pkgdir}/usr/share/licenses/graphviz/LICENSE
}
