
pkgname=kde-touchpad-config
pkgver=1.1
_commit=8901d1c
pkgrel=1
pkgdesc="Touchpad configuration tool for KDE, provides a System Settings module that allows configuration of touchpads."
arch=('x86_64')
url="https://github.com/sanya-m/kde-touchpad-config"
license=('GPL')
depends=('kde-workspace' 'xf86-input-synaptics' 'libx11' 'libxcb' 'xorg-server' 'libxi')
makedepends=('automoc4' 'cmake' 'pkg-config')
conflicts=('synaptiks')
replaces=('synaptiks')
groups=('system')
source=("https://github.com/sanya-m/kde-touchpad-config/archive/v${pkgver}.tar.gz"
        'xlibbackend.diff'
        'x11.diff')
md5sums=('e8905e7888f3a6f002338fdf1417a5b5'
         '417d582f137c4d6c8c80501c817e9f66'
         'bb1c795439814faebfad23f71161f544')

prepare() {
  cd ${pkgname}-${pkgver}
  patch -p0 -i ${srcdir}/xlibbackend.diff
  patch -p0 -i ${srcdir}/x11.diff
}

build() {
  mkdir build 
  cd build
  
  cmake ../${pkgname}-${pkgver} \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package() {
    cd build
    
    make DESTDIR="$pkgdir" install
}
