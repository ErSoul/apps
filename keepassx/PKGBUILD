
pkgname=keepassx
pkgver=1.9.86
pkgrel=1
_commit=943ba1fe067143a1d76a0f134ea1a0e563a998be
pkgdesc="Cross platform password manager"
arch=('x86_64')
url="http://www.keepassx.org/"
license=('GPL2')
depends=('qt5-x11extras' 'libxtst' 'shared-mime-info')
makedepends=('cmake' 'intltool' 'qt5-tools')
#depends=('qt' 'libxtst' 'shared-mime-info')
#makedepends=('cmake' 'intltool')
groups=('accessories')
#source=("http://downloads.sourceforge.net/keepassx/keepassx-$pkgver.tar.gz")
source=("https://github.com/keepassx/keepassx/archive/${_commit}.zip")
md5sums=('eb1c6ccee5b08a53b4b216336572197e')

build() {
  cd "${srcdir}/keepassx-${_commit}"
  mkdir build
  
  cd build
  cmake -DCMAKE_INSTALL_PREFIX=/usr \
        -DCMAKE_BUILD_TYPE=Release \
        -DCMAKE_INSTALL_LIBDIR=/usr/lib \
        -DWITH_GUI_TESTS=ON ..
  make 
}

package() {
    cd "${srcdir}/keepassx-${_commit}/build"
    
    make DESTDIR="${pkgdir}" install 
}
