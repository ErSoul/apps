
pkgname=choqok
pkgver=1.5.83
pkgrel=1
pkgdesc="A Twitter/identi.ca/laconica client for KDE"
url="http://choqok.gnufolks.org/"
license=('GPL')
arch=('x86_64')
depends=('kconfigwidgets' 'kcoreaddons' 'ki18n' 'kemoticons' 'kglobalaccel' 'kcmutils' 'knotifyconfig' 'sonnet'
         'kwallet' 'kwidgetsaddons' 'kxmlgui' 'kdelibs4support' 'telepathy-qt5' 'kaccounts-providers' 'qoauth' 'qca-qt5')
makedepends=('extra-cmake-modules' 'git' 'kdoctools')
groups=('communication')
install="${pkgname}.install"
source=("git://anongit.kde.org/choqok.git#branch=frameworks")
md5sums=('SKIP')

build() {
  cd ${srcdir}
  mkdir build
  
  cd build
  cmake ../${pkgname} \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DPLUGIN_INSTALL_DIR=/usr/lib/qt5/plugins \
    -DKDE_INSTALL_USE_QT_SYS_PATHS=ON \
    -DLIB_INSTALL_DIR=lib
  make
}

package() {
  cd ${srcdir}/build  
  make DESTDIR=${pkgdir} install
  
  #sed -i 's|Exec=choqok %i -caption %c|Exec=choqok -qwindowtitle %c|' ${pkgdir}/usr/share/applications/choqok.desktop
  #provided by kaccounts-providers
  #rm -r ${pkgdir}/usr/share/icons/hicolor/16x16/apps/laconica_microblog.png
  #rm -r ${pkgdir}/usr/share/icons/hicolor/16x16/apps/twitter_microblog.png
  #rm -r ${pkgdir}/usr/share/icons/hicolor/22x22/apps/laconica_microblog.png
  #rm -r ${pkgdir}/usr/share/icons/hicolor/22x22/apps/twitter_microblog.png
  #rm -r ${pkgdir}/usr/share/icons/hicolor/32x32/apps/laconica_microblog.png
  #rm -r ${pkgdir}/usr/share/icons/hicolor/32x32/apps/twitter_microblog.png
  #rm -r ${pkgdir}/usr/share/icons/hicolor/48x48/apps/laconica_microblog.png
  #rm -r ${pkgdir}/usr/share/icons/hicolor/48x48/apps/twitter_microblog.png
}