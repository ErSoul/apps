
pkgname=kcmsystemd
pkgver=1.1.0.1
_commit=0bf0061
pkgrel=1
pkgdesc="Systemd control module for KDE"
arch=('x86_64')
url='https://github.com/rthomsen/kcmsystemd'
license=('GPL')
depends=('kconfigwidgets' 'kcoreaddons' 'kwidgetsaddons' 'ki18n' 'kservice' 'kauth' 'boost-libs')
makedepends=('extra-cmake-modules' 'boost')
source=("https://github.com/rthomsen/kcmsystemd/tarball/master/rthomsen-kcmsystemd-$pkgver.tar.gz"
        'kate.diff')
md5sums=('dc184139c70ba1fdc9e7acc9e8c10135'
         '31b985e580c5864987d3aa7ba340fc49')

build() {
  cd $srcdir/rthomsen-kcmsystemd-$_commit
  #patch -p1 -i ${srcdir}/kate.diff
  
  mkdir build

  cd build
  cmake .. -DCMAKE_INSTALL_PREFIX=/usr \
           -DCMAKE_INSTALL_LIBDIR=lib \
           -DKDE_INSTALL_USE_QT_SYS_PATHS=ON
  make
}

package() {
  cd $srcdir/rthomsen-kcmsystemd-$_commit/build

  make DESTDIR=$pkgdir install
}