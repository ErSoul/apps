
pkgname=clementine
_pkgname=Clementine
pkgver=1.2.3.81
pkgrel=1
_commit=e77c520
pkgdesc="Modern music player and library organiser that takes advantage of Qt4."
url="http://www.clementine-player.org/"
license="GPL"
arch=('x86_64')
install="${pkgname}.install"
depends=('gstreamer' 'taglib' 'glew' 'liblastfm' 'libgpod' 'libmtp' 'libplist'
         'hicolor-icon-theme' 'qtwebkit' 'libimobiledevice' 'qjson' 'protobuf'
         'libcdio-paranoia' 'qca' 'qca-ossl' 'chromaprint' 'sparsehash' 'libmygpo-qt'
         'gst-plugins-bad' 'gst-plugins-good' 'gst-plugins-ugly' 'pulseaudio')
makedepends=('cmake' 'boost' 'mesa')
groups=('multimedia')
#source=("https://github.com/clementine-player/${_pkgname}/archive/${pkgver}.tar.gz")
source=("https://github.com/clementine-player/Clementine/tarball/master/${_pkgname}-${pkgver}.tar.gz")
md5sums=('c73aa276e08ebe05a1edcc5481233f0e')

build() {
  cd "${srcdir}/clementine-player-${_pkgname}-${_commit}"
  # https://github.com/clementine-player/Clementine/issues/4401
  #patch -p1 -i $srcdir/namespace.patch
  
  mkdir -p build 
  
  cd build
  cmake ../ -DCMAKE_INSTALL_PREFIX=/usr \
            -DCMAKE_BUILD_TYPE=Release 
  make
}

package() {
  cd "${srcdir}/clementine-player-${_pkgname}-${_commit}/build"
  
  make install DESTDIR="${pkgdir}"
}

