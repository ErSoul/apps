
pkgname=smplayer
pkgver=14.3.0
pkgrel=3
pkgdesc="A complete front-end for MPlayer"
arch=('x86_64')
url="http://smplayer.sourceforge.net/"
license=('GPL')
depends=('qt5-multimedia' 'qt5-script' 'mplayer')
makedepends=('qt5-tools')
groups=('multimedia')
source=("http://downloads.sourceforge.net/sourceforge/$pkgname/${pkgname}-${pkgver}.tar.bz2"
        'icons.tar.xz'
        'icons-png.tar.xz')
md5sums=('c6ef86f7fe0022b35c0f06430f4cd9bd'
         'a65b679cb82e21f8f67e703209654e8f'
         '2e7246022ca77b369a90e4cb45c7cfa8')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  rm -r "${srcdir}/${pkgname}-${pkgver}/icons"
  rm -r "${srcdir}/${pkgname}-${pkgver}/src/icons-png"
  mv -iv "${srcdir}/icons/" "${srcdir}/${pkgname}-${pkgver}/"
  mv -iv "${srcdir}/icons-png/" "${srcdir}/${pkgname}-${pkgver}/src/"
  
  make PREFIX=/usr QMAKE=/usr/lib/qt5/bin/qmake LRELEASE=/usr/lib/qt5/bin/lrelease
  
  DOC_PATH="\\\"/usr/share/doc/smplayer\\\"" QMAKE_OPTS=DEFINES+=NO_DEBUG_ON_CONSOLE
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}
  
  make DOC_PATH=/usr/share/doc/smplayer DESTDIR="$pkgdir" PREFIX="/usr" install
}
