
pkgname=seafile-client
pkgver=4.2.3
_commit=c371897
pkgrel=1
pkgdesc="Seafile desktop client."
arch=('x86_64')
url="https://github.com/haiwen/seafile-client/"
license=('Apache' 'GPLv3')
depends=('qt5-webkit' 'seafile')
makedepends=('libtool' 'intltool' 'vala' 'cmake' 'qt5-tools')
source=("https://github.com/haiwen/seafile-client/archive/v${pkgver}.tar.gz")
#source=("https://github.com/haiwen/seafile-client/tarball/qt5/sea-client-${pkgver}.tar.gz")
md5sums=('7ce06797baf7282cb607429758e7fa92')

build() {
  #cd ${srcdir}/haiwen-${pkgname}-${_commit}
  cd ${srcdir}/${pkgname}-${pkgver}
  
  cmake -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_BUILD_TYPE=Release \
    -DBUILD_SHIBBOLETH_SUPPORT=ON \
    -DUSE_QT5=ON .
  make
}

package() {
  #cd ${srcdir}/haiwen-${pkgname}-${_commit}
  cd ${srcdir}/${pkgname}-${pkgver}
  
  make DESTDIR=${pkgdir} install
}